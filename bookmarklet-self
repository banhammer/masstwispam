javascript:(function(){if(!document.getElementById("tmpreq")){var tmp=document.createElement('DIV');tmp.id="tmpreq";tmp.style.cssText="display:block;z-index:20000;position:fixed;left:0;top:0;background:#fff;color:#000;";tmp.innerHTML="идёт процесс...";document.body.appendChild(tmp)}else{var tmp=document.getElementById("tmpreq")}var time=new Date();var userlist=[];var userelement=[];var userblist=[];var blacklistnum=0;var struonp="юзеров на странице: ";var strbl="заблокировано: ";var strnbl="; незаблокировано: ";function getuserlist(){var mainObj=document.getElementsByTagName("div");var ulist=[];for(var i=0;i<mainObj.length;i++){if(mainObj[i].getAttribute("data-item-type")=='user'){var uid=mainObj[i].getAttribute("data-item-id");var uelement=mainObj[i].parentNode;ulist.push(uid);userelement[uid]=uelement}}return ulist};function getauthkey(){var mainObj=document.getElementById("signout-form");for(var i=0;i<mainObj.childNodes.length;i++){if(mainObj.childNodes[i].nodeType==1){if(mainObj.childNodes[i].getAttribute("name")=="authenticity_token"){return mainObj.childNodes[i].getAttribute("value")}}}};function postsend(){xmlhttp=new XMLHttpRequest();xmlhttp.onreadystatechange=function(){var html=time.getHours()+':'+time.getMinutes()+'<br>';if(xmlhttp.readyState==4){var json=JSON.parse(xmlhttp.responseText);if(xmlhttp.status==200){if(json.new_state=='blocked'){blocked++}userelement[userlist[i]].parentNode.removeChild(userelement[userlist[i]])};if(xmlhttp.status==403||xmlhttp.status==404){if(json.errors){noblocked++}};if(noblocked>0){html+=strstart+'лимит превышен!<br>'}else{html+=strstart+'лимит не превышен.<br>'}curid++;if(curid>userlist.length){alert('завершено')}else{tmp.innerHTML=html+strbl+blocked+strnbl+noblocked;postsend()}}};xmlhttp.open("POST","https://twitter.com/i/user/report_spam",true);xmlhttp.setRequestHeader('accept','application/json, text/javascript, */*; q=0.01');xmlhttp.setRequestHeader('content-type','application/x-www-form-urlencoded; charset=UTF-8');xmlhttp.setRequestHeader('x-requested-with','XMLHttpRequest');xmlhttp.send("authenticity_token="+authkey+"&user_id="+userlist[curid])};var authkey=getauthkey();var userlist=getuserlist();var strstart=struonp+userlist.length+"<br>";tmp.innerHTML=strstart;if(userlist.length>0){var blocked=0;var noblocked=0;var curid=0;postsend()}else{tmp.innerHTML=strstart+"не запущено."}})()
